/****************************************************
 _oo8oo_
 o8888888o
 88" . "88
 (| -_- |)
 0\  =  /0
 ___/'==='\___
 .' \\|     |// '.
 / \\|||  :  |||// \
 / _||||| -:- |||||_ \
 |   | \\\  -  /// |   |
 | \_|  ''\---/''  |_/ |
 \  .-\__  '-'  __/-.  /
 ___'. .'  /--.--\  '. .'___
 ."" '<  '.___\_<|>_/___.'  >' "".
 | | :  `- \`.:`\ _ /`:.`/ -`  : | |
 \  \ `-.   \_ __\ /__ _/   .-` /  /
 =====`-.____`.___ \_____/ ___.`____.-`=====
 `=---=`

 ~~~~~~~佛祖保佑~~~~~~~木有bug~~~~~~~

 *****************************************************
 天涯浅唱 于2017.07.12 12:00 QQ:122452357
 *****************************************************/
(function(d){d.fn.extend({ajaxReturn:function(){function m(a){return a.attr("form")?d("[name="+a.attr("form")+"]"):a.closest("form")}function n(a){a.length&&"FORM"===a.get(0).tagName&&a.on("submit",function(){return!1})}function l(a,b,c){if(!f){f=!0;var e="jsonp"===a?a:"json";a="jsonp"===a?"get":a;p(!0);d[a](b,c,function(a){q(a)},e)}}function q(a){var b=a.time?1E3*a.time:1500,c=1!=e.length?1:0;a.msg&&layer.msg(a.msg,{icon:a.code?6:5,time:b});a.url&&setTimeout(function(){window.location.href=a.url},a.msg?b:0);d.isFunction(e[c])&&setTimeout(function(){e[c](a)},a.msg?b:0);setTimeout(function(){f=!1},a.msg?b:0)}function p(a){var b={};d.ajaxPrefilter(function(c,e,k){var g=c.url;b[g]?a?b[g].abort():k.abort():b[g]=k;var h=c.complete;c.complete=function(a,c){b[g]=null;d.isFunction(h)&&h.apply(this,arguments)}})}var e=arguments,f=!1;return this.each(function(){d(this).off().on("click",function(){var a=d(this);if(1<e.length&&d.isFunction(e[0])&&!1===e[0]())return n(m(a)),!1;var b=m(a),c=a.attr("href")||a.attr("target")||(b.attr("action")?b.attr("action"):void 0),f=a.attr("method")||b.attr("method")||(b.length?"post":"get"),k=void 0===a.attr("confirmation")||"false"===a.attr("confirmation")?!1:!0,g=void 0===b.attr("validation")||"false"===b.attr("validation")?!1:!0,h=b.find("[name]").serialize();if(k)return layer.confirm(a.attr("confirmation")?a.attr("confirmation"):"\u786e\u5b9a\u8981\u6267\u884c\u8be5\u64cd\u4f5c\u5417?",{btn:["\u6715\u786e\u5b9a","\u6715\u653e\u5f03"],icon:3},function(a){layer.close(a);l(f,c,h)}),!1;if(g)return b.validater(function(a){var b=a.target;a.status?l(f,c,h):layer.alert(a.msg,{btn:["\u6715\u77e5\u9053\u4e86"],icon:0},function(a){b.focus();layer.close(a)})}),!1;if(void 0!==a.attr("form")&&!b.length)return layer.msg("\u63d0\u4ea4\u8868\u5355\u4e0d\u5b58\u5728\uff01",{icon:0,time:1500}),!1;if(!c)return layer.msg("\u8bf7\u6c42\u5730\u5740\u672a\u5b9a\u4e49\uff01",{icon:0,time:1500}),!1;l(f,c,h);n(b);return!1})})}});d("[ajaxReturn]").each(function(){"false"!==d(this).attr("ajaxReturn")&&d(this).ajaxReturn()})})(jQuery);