/****************************************************
 _oo8oo_
 o8888888o
 88" . "88
 (| -_- |)
 0\  =  /0
 ___/'==='\___
 .' \\|     |// '.
 / \\|||  :  |||// \
 / _||||| -:- |||||_ \
 |   | \\\  -  /// |   |
 | \_|  ''\---/''  |_/ |
 \  .-\__  '-'  __/-.  /
 ___'. .'  /--.--\  '. .'___
 ."" '<  '.___\_<|>_/___.'  >' "".
 | | :  `- \`.:`\ _ /`:.`/ -`  : | |
 \  \ `-.   \_ __\ /__ _/   .-` /  /
 =====`-.____`.___ \_____/ ___.`____.-`=====
 `=---=`

 ~~~~~~~佛祖保佑~~~~~~~木有bug~~~~~~~

 *****************************************************
 天涯浅唱 于2017.07.01 12:00 QQ:122452357
 *****************************************************/
(function (c) {
    c.fn.extend({
        validater: function (a) {
            return this.each(function () {
                var b = !0, d = null, e = "";
                c(this).find("[data-validate]").each(function () {
                    var a = c(this), g = c(this).data("validate").split(","), h;
                    for (h in g) {
                        var k = g[h].split(":");
                        if (!c.ruleDetection(a, k[0])) {
                            b = !1;
                            d = a;
                            e = k[1] || "\u63d0\u793a\u4fe1\u606f\u672a\u5b9a\u4e49";
                            break
                        }
                    }
                    return b
                });
                c.isFunction(a) && a(b ? {status: !0} : {status: !1, target: d, msg: e})
            })
        }
    });
    c.extend({
        ruleDetection: function (a, b) {
            var d = c.trim(a.val());
            if (1 < b.split("@").length) {
                var e = b.split("@");
                b = e[1];
                switch (e[0]) {
                    case "compare":
                        return eval(Number(d) + b);
                    case 'regexp':
                        return new RegExp(b, 'gi').test(d);
                        break;
                    case "reck":
                        return d === c('input[name="' + b + '"]').eq(0).val();
                    case "length":
                        return eval(d.length + b);
                    case "checked":
                        return a = a.closest("form").find('input[name="' + a.attr("name") + '"]:checked').length, eval(a + b);
                    case "radio":
                        return a = a.closest("form").find('input[name="' + a.attr("name") + '"]:checked').length, eval(1 === a);
                    case "ajax":
                        var f = !1;
                        a = b + d;
                        c.ajaxSetup({async: !1});
                        c.getJSON(a, function (a) {
                            f = a.status
                        });
                        return f;
                    default:
                        return !0
                }
            } else return this.dataType[b] ? this.dataType[b].test(d) : !0
        },
        dataType: {
            "*": /[\w\W]+/,
            "*6-16": /^[\w\W]{6,16}$/,
            n: /^\d+$/,
            "n6-16": /^\d{6,16}$/,
            s: /^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,
            "s6-18": /^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,
            zipcode: /^[0-9]{6}$/,
            m: /^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|17[0-9]{9}$|18[0-9]{9}$/,
            e: /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,
            url: /^(\w+:\/\/)?\w+(\.\w+)+.*$/,
            zh: /^[\u0391-\uFFE5]+$/,
            en: /^[A-Za-z]+$/,
            zname: /^[\u4E00-\u9FA5\uf900-\ufa2d]{2,8}$/,
            ip: /^[\d\.]{7,15}$/,
            qq: /^[1-9]\d{4,10}$/,
            age: /^[1-120]?\d*$/,
            id: /^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,
            color: /^#[0-9a-fA-F]{6}$/,
            img: /(.*)\.(jpg|gif|ico|jpeg|png)$/,
            doc: /(.*)\.(doc|xls|docx|xlsx|pdf)$/,
            zip: /(.*)\.(rar|zip|7zip|tgz)$/,
            video: /(.*)\.(rm|rmvb|wmv|avi|mp4|3gp|mkv)$/,
            flash: /(.*)\.(swf|fla|flv)$/,
            mp3: /(.*)\.(mp3)$/
        }
    })
})(jQuery);